(function(){var e=window.sg.common.$q,x=window.sg.common.constants.BREAKPOINTS,h=window.sg.common.utils,g=window.sg.common.swiperManager,r=window.sg.common.lazyLoad,t=window.sg.common.video,m=window.sg.common.constants.KEY_CODE,u=null,n=null,d=function(a){this.selector={component:".feature-column-carousel",componentInner:".feature-column-carousel__column",swiper:".feature-column-carousel .basic-swiper",itemWrap:".feature-column-carousel__feature",itemList:".feature-column-carousel__item",showItemList:".feature-column-carousel__item:not(.is-item-active)",
itemImgArea:".feature-column-carousel__figure",itemTxtArea:".feature-column-carousel__text-wrap",itemBtnArea:".feature-column-carousel__button",itemDiscArea:".feature-column-carousel__disclaimer",slideBackBtn:".feature-column-carousel__quick-button",videoWrap:".feature-column-carousel__video-wrap",videoPlayBtn:".feature-column-carousel__play-button",videoCloseBtn:".feature-column-carousel__close",viewMoreBtn:".feature-column-carousel__more-button .cta",ctaButton:".cta[data-target-popup-id]",devideCls:"feature-column-carousel--divide"};
this.el={component:e(a)};this.mobileFlag=this.desktopFlag=this.startFlag=!1;this.handler={resize:this.resize.bind(this),clickCtaButton:function(a){var c=e(null);if("string"===typeof a.target.dataset.targetPopupId){var b=a.target.dataset.targetPopupId.trim().replace("#","");""!==b&&(c=e("#"+b))}c.hasClass("pr-g-j2a-converter")?window.sg.components.prGj2aCover.openPopup(c.target[0],a.currentTarget):c.css({display:"block",overflow:"hidden"})}};d.instances.set(a,this);this.setElement();this.init()};d.prototype.setElement=
function(){this.el.componentInner=this.el.component.find(this.selector.componentInner);this.el.itemWrap=this.el.component.find(this.selector.itemWrap);this.el.itemList=this.el.component.find(this.selector.itemList);this.el.showItemList=this.el.component.find(this.selector.showItemList);this.el.itemImgArea=this.el.component.find(this.selector.itemImgArea);this.el.itemTxtArea=this.el.component.find(this.selector.itemTxtArea);this.el.itemBtnArea=this.el.component.find(this.selector.itemBtnArea);this.el.itemDiscArea=
this.el.component.find(this.selector.itemDiscArea);this.el.slideBackBtn=this.el.component.find(this.selector.slideBackBtn);this.el.videoWrap=this.el.component.find(this.selector.videoWrap);this.el.videoPlayBtn=this.el.component.find(this.selector.videoPlayBtn);this.el.videoCloseBtn=this.el.component.find(this.selector.videoCloseBtn);this.el.viewMoreBtn=this.el.component.find(this.selector.viewMoreBtn);this.el.ctaButton=this.el.component.find(this.selector.ctaButton);this.moreFlag=this.resizeFlag=
this.mobileFlag=this.desktopFlag=!1;this.timer=null};d.prototype.init=function(){this.bindEvents();this.resize()};d.prototype.reInit=function(){this.setElement();this.init()};d.prototype.devideColumn=function(a){for(var b=this,c=a.find(this.selector.componentInner).target[0].classList,f=1;6>f;f++){var e=void 0;e="desktop"===h.getCurrentDevice()?"feature-column-carousel__column--desktop-columns-"+f:"feature-column-carousel__column--mobile-columns-"+f;for(var d=1;d<c.length;d++)if(c[d]===e){for(var k=
f,g=a.find(this.selector.itemList).target,l=[],y=Math.floor(g.length/k),v=0;v<=y;v++)l.push(g.splice(0,k));l.forEach(function(a){b.setHeight(a)})}}};d.prototype.setHeight=function(a){var b=this,c=e(a);a=c.find(this.selector.itemImgArea);var f=c.find(this.selector.itemTxtArea),d=c.find(this.selector.itemBtnArea);c=c.find(this.selector.itemDiscArea);[a,f,d,c].forEach(function(a){var b=[];a.target.forEach(function(a){a=e(a);a.css({height:""});a.hasClass("feature-column-carousel__figure")&&(a=a.find(".image__main"));
b.push(a.height())});var c=Math.max.apply(null,b);a.target.forEach(function(a){e(a).css({height:c+"px"})})});0<this.el.component.find(".swiper-container").target.length&&setTimeout(function(){g.slideUpdate(b.el.component.find(".swiper-container").target[0])},50)};d.prototype.setImgHeight=function(a){var b=this;(void 0===a?this.el.itemImgArea:a).target.forEach(function(a){a=e(a);var b=a.closest(".swiper-slide"),c=a.find(".image .image__main");c.css({height:""});a.css({height:c.height()+"px"});b.css({height:""})});
0<this.el.component.find(".swiper-container").target.length&&setTimeout(function(){g.slideUpdate(b.el.component.find(".swiper-container").target[0])},50)};d.prototype.setDefault=function(){[this.el.component.find(this.selector.itemImgArea),this.el.component.find(this.selector.itemTxtArea),this.el.component.find(this.selector.itemBtnArea),this.el.component.find(this.selector.itemDiscArea)].forEach(function(a){a.css({height:""})})};d.prototype.backSlide=function(a){a=e(a).closest(this.selector.swiper);
g.getSwiper(a.target[0]).slideTo(0)};d.prototype.activeEmbed=function(a){var b=e("#"+a.target[0].dataset.videoId),c=b.find(".video").target[0],f=g.getSwiper(this.el.component.find(this.selector.swiper).target[0]);b.show();b.attr("tabindex","0").focus();t.init(c);this.el.activeVideoBtn=a;h.hiddenScroll();!1!==f&&void 0!==f&&(this.el.autoplaing=f.autoplay.running,f.autoplay.stop())};d.prototype.unactiveEmbed=function(a){a=a.closest(this.selector.videoWrap);var b=a.find(".video").target[0],c=g.getSwiper(this.el.component.find(this.selector.swiper).target[0]);
this.el.activeVideoBtn.focus();this.el.activeVideoBtn=null;a.hide();a.removeAttr("tabindex");t.dispose(b);h.visibleScroll();!1!==c&&void 0!==c&&(this.el.autoplaing&&c.autoplay.start(),this.el.autoplaing=null)};d.prototype.viewMoreItem=function(a,b){var c=this,f=a.closest(this.selector.component),d=f.find(this.selector.showItemList),g=x.MOBILE<h.getViewPort().width?a.attr("data-desktop-per-page"):a.hasClass("use-mobile-carousel")?a.attr("data-desktop-per-page"):a.attr("data-mobile-per-page"),k=null,
q=0;d.target.forEach(function(a,c){c<g&&(a=e(a),a.addClass("is-item-active"),void 0!==b&&0===c&&(k=a))});var l=function(){var a=d.eq(q);q<g?(a.addClass("is-item-visible"),setTimeout(l,100)):clearTimeout(l);q++}.bind(this);(function(){r.setLazyLoad();setTimeout(function(){c.setDefault();c.devideColumn(f);f.find(".image__main").target.forEach(function(a){e(a).on("load",function(){c.devideColumn(f)})})},30);setTimeout(l,500)}).call(this);0===n.find(this.selector.showItemList).target.length&&this.el.viewMoreBtn.css({display:"none"});
void 0!==b&&(k.attr("tabindex","0").focus(),k.off("keydown").on("keydown",function(a){a.keyCode===m.TAB&&k.removeAttr("tabindex")}))};d.prototype.setSlideGroup=function(){var a=this,b=this.el.component.find(this.selector.swiper).target[0],c=e(b).hasClass("feature-column-carousel__carousel")&&!e(b).hasClass("desktop-next-slide-to-show"),f=e(b).hasClass("use-desktop-back-button");if(c){var d=1*e(b).attr("data-desktop-item-per-slide-scroll");if("desktop"===h.getCurrentDevice()){c={slidesPerGroup:d,autoHeight:!1};
f&&(c.freeMode=!0);g.slideRemove(b);g.slideInit(b,c);window.sg.common.image.initAll();this.el.slideBackBtn.attr("tabindex",-1);var p=g.getSwiper(b);p.on("slideChangeTransitionEnd",function(){p.activeIndex+d===p.slides.length?a.el.slideBackBtn.removeAttr("tabindex"):a.el.slideBackBtn.attr("tabindex",-1)})}else g.slideRemove(b),g.slideInit(b,{autoHeight:!0}),window.sg.common.image.initAll()}};d.prototype.resizeActive=function(){var a=this;r.setLazyLoad();this.setDefault();"desktop"===h.getCurrentDevice()?
!1===this.desktopFlag&&(this.desktopFlag=!0,this.mobileFlag=!1,this.setSlideGroup()):!1===this.mobileFlag&&(this.mobileFlag=!0,this.desktopFlag=!1,this.setSlideGroup());this.el.component.target.forEach(function(b){var c=e(b);if(c.hasClass(a.selector.devideCls))a.devideColumn(c),c.find(".image__main").target.forEach(function(b){e(b).on("load",function(){a.devideColumn(c)})});else{var f=c.find(".feature-column-carousel__carousel");if(f.hasClass("desktop-next-slide-to-show"))a.el.featureSwiper=g.getSwiper(f.target[0]),
f.find(a.selector.itemImgArea+" .image__main").target.forEach(function(b){var c=e(b);if(c.hasClass("image--loaded"))a.setImgHeight(c.closest(a.selector.itemImgArea));else c.on("load",function(){a.setImgHeight(c.closest(a.selector.itemImgArea))})});else{f=f.find(a.selector.itemImgArea+" .image__main");var d=b;"desktop"===h.getCurrentDevice()?(a.setHeight(d),f.on("load",function(){a.setHeight(d)})):(d=c.find(".feature-column-carousel__item"),d.target.forEach(function(b){a.setHeight(b)}),f.target.forEach(function(b){var c=
e(b);c.on("load",function(){a.setHeight(c.closest(a.selector.itemList).target[0])})}))}}})};d.prototype.resize=function(){var a=this;this.el.component.target.forEach(function(b){b=e(b).find(a.selector.componentInner);var c=b.attr("data-desktop-per-page")>b.attr("data-mobile-per-page")?"desktop":"mobile",d="mobile"===c?"desktop":"mobile";!1===a.startFlag?(b.attr("data-desktop-per-page")||b.attr("data-mobile-per-page")?(a.viewMoreItem(b),b.hasClass("use-mobile-carousel")||h.getCurrentDevice()!==d||
(a.resizeFlag=!0)):setTimeout(function(){a.resizeActive()},100),a.startFlag=!0):(!1!==a.moreFlag||!b.attr("data-desktop-per-page")&&!b.attr("data-mobile-per-page")||b.hasClass("use-mobile-carousel")||h.getCurrentDevice()!==c||!0!==a.resizeFlag||(a.el.itemList.removeClass("is-item-active"),a.el.itemList.removeClass("is-item-visible"),a.viewMoreItem(b),a.resizeFlag=!1),setTimeout(function(){a.resizeActive()},100))})};d.prototype.bindEvents=function(){var a=this;u.off("resize",this.handler.resize).on("resize",
this.handler.resize);this.el.slideBackBtn.target.forEach(function(b){e(b).off("click").on("click",function(){a.backSlide(b)})});this.el.videoPlayBtn.target.forEach(function(b){var c=e(b);c.off("click").on("click",function(){a.activeEmbed(c)})});this.el.videoCloseBtn.target.forEach(function(b){var c=e(b);c.off("click").on("click",function(){a.unactiveEmbed(c)});c.off("keydown").on("keydown",function(b){var d=c.closest(a.selector.videoWrap);b.keyCode===m.TAB&&!1===b.shiftKey&&d.attr("tabindex","0").focus();
b.keyCode===m.ENTER&&a.unactiveEmbed(c);b.preventDefault()})});this.el.videoWrap.target.forEach(function(b){var c=e(b);c.off("keydown").on("keydown",function(b){var d=c.find(a.selector.videoCloseBtn);b.keyCode===m.TAB&&!0===b.shiftKey&&(d.attr("tabindex","0").focus(),b.preventDefault())})});this.el.viewMoreBtn.target.forEach(function(b){var c=e(b);c.off("click").on("click",function(){a.viewMoreItem(c.closest(a.selector.componentInner),"focus");a.moreFlag=!0})});this.el.ctaButton.target.forEach(function(b){e(b).off("click",
a.handler.clickCtaButton).on("click",a.handler.clickCtaButton)})};var w=function(){u=e(window);n=e(".feature-column-carousel");n.target.length&&e(".feature-column-carousel").target.forEach(function(a){d.instances.has(a)||new d(a)})};d.instances=new WeakMap;e.ready(w);window.sg.components.featureColumnCarousel={init:w,reInit:function(){e(".feature-column-carousel").target.forEach(function(a){e(a).find(".basic-swiper").target.forEach(function(a){void 0===a.swiper?g.slideInit(a):g.slideReInit(a)});d.instances.has(a)?
d.instances.get(a).reInit():new d(a)})}}})();