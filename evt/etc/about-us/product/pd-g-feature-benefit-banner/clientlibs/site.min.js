(function(){function e(){d(c.section).target.forEach(function(a){b.instances.has(a)||new b(a)})}var h=window.sg.common.libs,d=window.sg.common.$q,f=window.sg.common.utils,g=window.sg.common.video,k=window.sg.common.utils.setMobileFocusLoop,l=window.sg.common.utils.removeMobileFocusLoop,c={section:".st-feature-benefit-banner",btn:".st-feature-benefit-banner__cta .js-video-play",pop:".st-feature-benefit-banner__video",video:".st-feature-benefit-banner__video div.video",close:".st-feature-benefit-banner__close"},
b=function(a){this.ele={section:d(a),btn:null,pop:null};this.setProperty();0>=this.ele.pop.target.length||(this.event={focusLock:this.eventFocusLock.bind(this)},b.instances.set(a,this),this.init())};b.prototype.setProperty=function(){this.ele.btn=this.ele.section.find(c.btn);this.ele.pop=this.ele.section.find(c.pop);this.ele.video=this.ele.section.find(c.video).target[0];this.ele.close=this.ele.section.find(c.close);this.isLayer=this.ele.pop.hasClass("js-layer-type-video")};b.prototype.eventFocusLock=
function(a){a.keyCode===h.keyCode.TAB_KEY&&(!1===a.shiftKey&&this.ele.close.target[0]===document.activeElement?this.ele.pop.find(".video-player").focus():!0===a.shiftKey&&this.ele.pop.find(".video-player").target[0]===document.activeElement&&(a.preventDefault(),this.ele.close.focus()))};b.prototype.openPopup=function(){var a=this;this.ele.pop.css({display:"block"});g.init(this.ele.video);this.ele.pop.find(".video-player").attr("tabindex",0);setTimeout(function(){a.ele.pop.find(".video-player").focus()},
300);this.isLayer&&(k(this.ele.pop.target[0]),this.ele.section.on("keydown",this.event.focusLock),f.hiddenScroll())};b.prototype.closePopup=function(){this.ele.pop.css({display:"none"});g.dispose(this.ele.video);this.ele.pop.find(".video-player").attr("tabindex","");this.ele.btn.focus();this.isLayer&&(this.ele.section.off("keydown",this.event.focusLock),l(),f.visibleScroll())};b.prototype.init=function(){this.bindEvents()};b.prototype.reInit=function(){this.setProperty();this.bindEvents()};b.prototype.bindEvents=
function(){var a=this;this.ele.btn.off("click").on("click",function(){a.openPopup()});this.ele.close.off("click").on("click",function(){a.closePopup()});"mp4"===this.ele.video.getAttribute("data-video-type")&&"true"===this.ele.video.getAttribute("data-video-embed")&&this.ele.video.querySelector("video").addEventListener("play",function(){event.target.currentTime=0})};b.instances=new WeakMap;window.sg.components.stFeatureBenefitBanner={reInit:function(){d(c.section).target.forEach(function(a){b.instances.has(a)&&
b.instances.get(a).reInit()})}};d.ready(e);d.load(e)})();