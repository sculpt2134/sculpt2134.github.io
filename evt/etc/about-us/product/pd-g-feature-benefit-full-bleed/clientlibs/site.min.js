(function(){function g(){n.setLazyLoad();e(c.section).target.forEach(function(a){d.instances.has(a)?d.instances.get(a).reInit():new d(a)})}var e=window.sg.common.$q,f=window.sg.common.utils,l=window.sg.common.video,n=window.sg.common.lazyLoad,h=window.sg.common.constants.BREAKPOINTS,k=window.sg.common.utils.setMobileFocusLoop,m=window.sg.common.utils.removeMobileFocusLoop,c={section:".st-feature-benefit-full-bleed",sectionInner:".st-feature-benefit-full-bleed__wrap",btnWrap:".st-feature-benefit-full-bleed__cta",
btn:".st-feature-benefit-full-bleed__cta .js-video-play",pop:".st-feature-benefit-full-bleed__video",video:"div.video",close:".st-feature-benefit-full-bleed__close",videoLayer:".st-feature-benefit-full-bleed__video-layer",layerTypeVideo:"st-feature-benefit-full-bleed--video-layer",ctaButton:".cta[data-target-popup-id]"},d=function(a){var b=this;this.ele={section:e(a),sectionInner:null,btnWrap:null,btn:null,pop:null,ctaButton:null,loopFirst:null,loopEnd:null};this.setProperty();this.setMobileFocusLoop=
this.isPc=null;this.handler={clickCtaButton:function(b){var a=e(null);if("string"===typeof b.target.dataset.targetPopupId){var c=b.target.dataset.targetPopupId.trim().replace("#","");""!==c&&(a=e("#"+c))}a.hasClass("pr-g-j2a-converter")?window.sg.components.prGj2aCover.openPopup(a.target[0],b.currentTarget):a.css({display:"block",overflow:"hidden"})},resize:function(){var a=h.MOBILE<f.getViewPort().width;a!==b.isPc&&(a?(null!==b.ele.loopFirst&&b.ele.loopFirst.target[0]===b.ele.section.find(".popup-video__looping--first").target[0]&&
(b.ele.loopFirst.remove(),b.ele.loopEnd.remove(),b.ele.loopFirst=null,b.ele.loopEnd=null,b.ele.pop.attr("tabindex","")),f.visibleScroll(),b.ele.section.hasClass("st-feature-benefit-full-bleed--video-embed")&&!0===b.setMobileFocusLoop&&(m(),b.setMobileFocusLoop=!1,b.ele.sectionInner.attr("aria-hidden",!0))):(f.hiddenScroll(),b.ele.section.hasClass("st-feature-benefit-full-bleed--video-embed")&&!0!==b.setMobileFocusLoop&&(b.ele.sectionInner.removeAttr("aria-hidden"),k(b.ele.pop.target[0]),b.setMobileFocusLoop=
!0,b.ele.section.find(".popup-video__looping--first").attr("aria-hidden",!1))),b.isPc=null)}};d.instances.set(a,this);this.init()};d.prototype.setProperty=function(){var a=this;this.ele.sectionInner=this.ele.section.find(c.sectionInner);this.ele.btnWrap=this.ele.section.find(c.btnWrap);this.ele.btn=this.ele.section.find(c.btn);this.ele.pop=this.ele.section.find(c.pop);this.ele.video=this.ele.pop.find(c.video).target[0];this.ele.close=this.ele.pop.find(c.close);this.ele.ctaButton=this.ele.section.find(c.ctaButton);
this.ele.videoLayer=this.ele.section.find(c.videoLayer);(this.contentVideo=this.ele.section.find(".st-feature-benefit-full-bleed__figure").hasClass("s-video-bg"))&&setTimeout(function(){var b=a.ele.section.find(".st-feature-benefit-full-bleed__figure.s-video-bg").find(c.video);"mp4"===b.attr("data-video-type")&&JSON.parse(b.attr("data-video-data")).controls&&a.ele.section.find(".st-feature-benefit-full-bleed__figure.s-video-bg").find("video").attr("tabindex","0")},500)};d.prototype.openPopup=function(){var a=
this;this.ele.pop.css({display:"block"});l.init(this.ele.video);this.contentVideo&&this.ele.section.find(c.video).find(".video-player").target[0].pause();var b=this.ele.section.hasClass(c.layerTypeVideo);!b&&h.MOBILE<f.getViewPort().width?(this.ele.pop.attr("tabindex",0),setTimeout(function(){a.ele.pop.focus()},400)):(this.ele.videoLayer.prepend('\x3cbutton class\x3d"popup-video__looping--first"\x3e\x3c/button\x3e'),this.ele.close.after('\x3cbutton class\x3d"popup-video__looping--end"\x3e\x3c/button\x3e'),
this.loopFocus(),this.ele.pop.attr("tabindex",0),setTimeout(function(){a.ele.close.focus()},400));!0!==b?(this.isPc=null,h.MOBILE>=f.getViewPort().width?(k(this.ele.pop.target[0]),this.setMobileFocusLoop=!0,this.ele.section.find(".popup-video__looping--first").attr("aria-hidden",!1)):this.ele.sectionInner.attr("aria-hidden",!0),e(window).off("resize",this.handler.resize).on("resize",this.handler.resize),this.handler.resize()):(!0!==this.setMobileFocusLoop&&(k(this.ele.pop.target[0]),this.setMobileFocusLoop=
!0,this.ele.section.find(".popup-video__looping--first").attr("aria-hidden",!1)),f.hiddenScroll());"mp4"===this.ele.video.getAttribute("data-video-type")&&JSON.parse(this.ele.video.getAttribute("data-video-data")).controls&&e(this.ele.video).find("video").attr("tabindex","0");this.ele.btnWrap.find(".cta").attr("tabindex","-1")};d.prototype.closePopup=function(){var a=this;this.ele.sectionInner.removeAttr("aria-hidden");this.ele.btnWrap.find(".cta").removeAttr("tabindex");this.ele.btnWrap.find(".cta").css({display:"inline-flex"});
setTimeout(function(){a.ele.btn.focus();a.ele.pop.css({display:"none"});l.dispose(a.ele.video);a.contentVideo&&a.ele.section.find(c.video).find(".video-player").target[0].play()},200);this.ele.loopFirst&&(this.ele.loopFirst.remove(),this.ele.loopEnd.remove(),this.ele.loopFirst=this.ele.section.find(".popup-video__looping--first"),this.ele.loopEnd=this.ele.section.find(".popup-video__looping--end"));this.ele.pop.attr("tabindex","");f.visibleScroll();e(window).off("resize",this.handler.resize);this.setMobileFocusLoop&&
(m(),this.setMobileFocusLoop=!1)};d.prototype.loopFocus=function(){var a=this;this.ele.loopFirst=this.ele.section.find(".popup-video__looping--first");this.ele.loopEnd=this.ele.section.find(".popup-video__looping--end");this.ele.section.find(".popup-video__looping--first").off("focus").on("focus",function(){a.ele.close.focus()});this.ele.section.find(".popup-video__looping--end").off("focus").on("focus",function(){a.ele.pop.focus()})};d.prototype.init=function(){this.bindEvents()};d.prototype.reInit=
function(){this.setProperty();this.bindEvents()};d.prototype.bindEvents=function(){var a=this;this.ele.btn.off("click").on("click",function(){a.openPopup()});this.ele.close.off("click").on("click",function(){a.closePopup()});this.ele.ctaButton.target.forEach(function(b){e(b).off("click",a.handler.clickCtaButton).on("click",a.handler.clickCtaButton)})};d.instances=new WeakMap;window.sg.components.featureBenefitFullBleed={init:g,reInit:g};e.ready(g);e.load(g)})();