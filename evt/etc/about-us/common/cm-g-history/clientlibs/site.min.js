(function(){var d=window.sg.common.$q,p=window.sg.common.tab,f=window.sg.common.swiperManager,g=window.sg.common.constants.BREAKPOINTS,h=window.sg.common.utils,q=window.sg.common.lazyLoad,k=window.sg.common.scrollbar,m="webkitTransitionEnd oTransitionEnd otransitionend mozTransitionEnd moztransitionend transitionend transitionEnd".split(" "),e=function(a){var c=this;this.selector={swiper:".basic-swiper",tab:".tab",tabItem:".tab__item",content:".history__inner",contentList:".history__content",timelineArea:".history__timeline-area",
swiperContainer:".swiper-container",rightClass:"gradations-effects-right",leftClass:"gradations-effects-left",activeClass:"is-active",prevArrow:".history__indicator--prev",nextArrow:".history__indicator--next",disableClass:"is-disabled"};this.el={window:d(window),component:d(a),tab:null,tabItem:null,content:null,contentList:null,timelineArea:null,swiperContainer:null};this.posArr=[];this.activeTarget=this.prevTarget=null;this.contentWidth=0;this.defaultPos={transition:"none",left:"-100%"};this.pointerTimer=
this.resizeTimer=this.timer=null;this.delayTime=10;this.mobileFlag=this.desktopFlag=!1;this.reInitFlag=this.endFlag=null;this.lastScrollLeft=0;this.handler={clickTabItem:this.clickTabItem.bind(this),resize:function(){var a=function(){c.contentWidth=c.el.content.width();c.el.contentList.css({width:c.contentWidth+"px"})};a();c.resizeTimer&&clearTimeout(c.resizeTimer);c.resizeTimer=setTimeout(function(){a();g.MOBILE>=h.getViewPort().width?!1===c.mobileFlag&&(c.mobileFlag=!0,c.desktopFlag=!1,c.scrollDestroy()):
!1===c.desktopFlag&&(c.desktopFlag=!0,c.mobileFlag=!1,c.scrollUse());c.posArr.forEach(function(a){c.prevTarget.idx!==a.idx&&a.target.css(c.defaultPos)})},c.delayTime+1);c.initSet()}};e.instances.set(a,this);this.init()};e.prototype.initSet=function(){var a=this;if(0===this.el.content.find(".history__content.is-active").target.length){this.el.contentList.eq(0).addClass(this.selector.activeClass);for(var c=0;c<this.el.contentList.target.length;c++)d(this.el.contentList.target[c]).target[0].setAttribute("style",
"opacity:0; position:absolute; left:-100%;");d(this.el.contentList.target[0]).target[0].setAttribute("style","opacity:1; position:absolute; left:0;")}this.currentIdx=this.el.content.find(".history__content.is-active").index();setTimeout(function(){a.el.content.css({height:a.el.contentList.target[a.currentIdx].offsetHeight+"px"})},200)};e.prototype.clickTabItem=function(a,c){var b=this;c=void 0===c?null:c;a=1>d(a.target).target.length?a:a.target;a=d(a).closest(this.selector.tabItem).index();var e=
this.posArr[a];if(this.prevTarget.idx!==e.idx||null!==c){var l=0;this.el.content.css({height:this.el.contentList.eq(e.idx).outerHeight()+"px"});this.el.contentList.removeClass(this.selector.activeClass);e.target.addClass(this.selector.activeClass);g.MOBILE<h.getViewPort().width?(this.lastScrollLeft=0,this.el.contentList.eq(e.idx).find(".scrollbar__wrap").target[0].scrollLeft=0,this.el.timelineArea.addClass(this.selector.rightClass),this.el.contentList.find(".swiper-wrapper").removeAttr("tabindex"),
3<e.target.find(".swiper-slide").target.length&&e.target.find(".swiper-wrapper").attr("tabindex",0)):(f.getSwiper(this.el.contentList.eq(e.idx).find(".swiper-container").target[0]).slideTo(0,0),this.containerHeight=this.el.contentList.eq(e.idx).outerHeight(),this.el.content.css({height:this.containerHeight+"px"}),this.el.contentList.find(".history__indicator").find("button").attr("tabindex","-1"),e.target.find(".history__indicator").find("button").attr("tabindex","0"));this.prevTarget.idx<e.idx?(e.target.css({transition:"none",
left:this.contentWidth+"px"}),l=-this.contentWidth,this.el.contentList.css({opacity:1})):(e.target.css({transition:"none",left:-this.contentWidth+"px"}),l=this.contentWidth);this.el.tabItem.css({"pointer-events":"none"});this.el.contentList.attr("aria-hidden","true");this.timer&&clearTimeout(this.timer);this.timer=setTimeout(function(){b.prevTarget.target.css({transition:"",left:l+"px"});e.target.css({transition:"",left:0});e.target.attr("aria-hidden","false");b.prevTarget=e},this.delayTime);this.pointerTimer&&
clearTimeout(this.pointerTimer);this.pointerTimer=setTimeout(function(){b.el.tabItem.css({"pointer-events":""})},this.delayTime+2);this.endFlag=!1}};e.prototype.scrollUse=function(){var a=this;this.el.swiperContainer.addClass("scrollbar");this.el.timelineArea.addClass(this.selector.rightClass);for(var c=0;c<this.el.swiperContainer.target.length;c++)k.init(this.el.swiperContainer.target[c]),3>=d(this.el.swiperContainer.target[c]).find(".swiper-slide").target.length?d(this.el.swiperContainer.target[c]).find(".swiper-wrapper").addClass("swiper-align-center"):
d(this.el.swiperContainer.target[c]).find(".swiper-wrapper").attr("tabindex",0);setTimeout(function(){for(var b=0;b<a.el.swiperContainer.target.length;b++)k.reInit(a.el.swiperContainer.target[b])},300)};e.prototype.scrollDestroy=function(){var a=this;if(this.el.swiperContainer.hasClass("scrollbar")){for(var c=0;c<this.el.swiperContainer.target.length;c++)k.destroy(this.el.swiperContainer.target[c]);this.el.swiperContainer.removeClass("scrollbar")}this.el.contentList.find(".swiper-wrapper").removeAttr("tabindex");
this.el.contentList.find(".history__indicator").find("button").attr("tabindex","-1");this.el.content.find(".history__content.is-active").find(".history__indicator").find("button").attr("tabindex","0");this.el.swiperContainer.target.forEach(function(b){d(b).prepend(d(b).find(".swiper-wrapper").target[0]);d(b).find(".scrollbar__wrap").remove();d(b).find(".scrollbar-horizontal__track").remove();void 0!==b.swiper&&setTimeout(function(){f.slideReInit(b);b.swiper.eventsListeners.touchStart.forEach(function(a,
b,c){0===c[b].length&&(c[b]=function(){})});d(b).eq(0).find(".history__current").text(b.swiper.activeIndex+1);d(b).find(a.selector.prevArrow).addClass(a.selector.disableClass);d(b).find(a.selector.prevArrow).attr("disabled",!0);d(b).find(a.selector.prevArrow).off("click").on("click",function(){b.swiper.slideTo(b.swiper.activeIndex-1)});d(b).find(a.selector.nextArrow).off("click").on("click",function(){b.swiper.slideTo(b.swiper.activeIndex+1)});1>=b.swiper.slides.length&&d(b).eq(0).find(".history__indicator button").hide();
f.slideInitEnd(b,function(){a.containerHeight=a.el.content.find(".history__content.is-active").outerHeight();d(b).find(".history__total").text(b.swiper.slides.length)});b.swiper.on("slideChange",function(){d(b).find(".history__current").text(b.swiper.activeIndex+1)});b.swiper.on("slideNextTransitionStart",function(){a.height=a.containerHeight-d(b).find(".swiper-slide").eq(b.swiper.activeIndex-1).target[0].offsetHeight+d(b).find(".swiper-slide").eq(b.swiper.activeIndex).target[0].offsetHeight;a.el.content.css({height:a.height+
"px"})});b.swiper.on("slidePrevTransitionStart",function(){a.height=a.containerHeight-d(b).find(".swiper-slide").eq(b.swiper.activeIndex+1).target[0].offsetHeight+d(b).find(".swiper-slide").eq(b.swiper.activeIndex).target[0].offsetHeight;a.el.content.css({height:a.height+"px"})});b.swiper.on("slideChangeTransitionEnd",function(){a.containerHeight=a.el.content.find(".history__content.is-active").outerHeight();b.swiper.activeIndex+1===b.swiper.slides.length?(d(b).find(a.selector.nextArrow).addClass(a.selector.disableClass),
d(b).find(a.selector.nextArrow).attr("disabled",!0),d(b).find(a.selector.prevArrow).removeAttr("disabled"),d(b).find(a.selector.prevArrow).removeClass(a.selector.disableClass),d(b).find(a.selector.prevArrow).focus()):0===b.swiper.activeIndex?(d(b).find(a.selector.prevArrow).addClass(a.selector.disableClass),d(b).find(a.selector.prevArrow).attr("disabled",!0),d(b).find(a.selector.nextArrow).removeAttr("disabled"),d(b).find(a.selector.nextArrow).removeClass(a.selector.disableClass),d(b).find(a.selector.nextArrow).focus()):
(d(b).find(a.selector.nextArrow).removeClass(a.selector.disableClass),d(b).find(a.selector.nextArrow).removeAttr("disabled"),d(b).find(a.selector.prevArrow).removeClass(a.selector.disableClass),d(b).find(a.selector.prevArrow).removeAttr("disabled"))})},100)})};e.prototype.setElements=function(){var a=this;this.el.swiper=this.el.component.find(this.selector.swiper);this.el.tab=this.el.component.find(this.selector.tab);this.el.tabItem=this.el.tab.find(this.selector.tabItem);this.el.content=this.el.component.find(this.selector.content);
this.el.contentList=this.el.component.find(this.selector.contentList);this.el.timelineArea=this.el.component.find(this.selector.timelineArea);this.el.swiperContainer=this.el.component.find(this.selector.swiperContainer);this.posArr=[];this.el.contentList.target.forEach(function(c,b){a.posArr[b]={};a.posArr[b].idx=b;a.posArr[b].target=d(c);0!==b&&!0!==a.reInitFlag&&a.posArr[b].target.css(a.defaultPos)});this.el.contentList.css({left:"",transition:"none"});this.prevTarget=this.posArr[0]};e.prototype.init=
function(){this.setElements();this.bindEvents();this.handler.resize()};e.prototype.reInit=function(){var a=this;this.reInitFlag=!0;this.unBindEvents();this.setElements();this.setSwiper();this.bindEvents();this.el.contentList.removeClass(this.selector.activeClass);g.MOBILE>=h.getViewPort().width?this.scrollDestroy():(this.scrollUse(),this.el.contentList.eq(0).find(".scrollbar__wrap").target[0].scrollLeft=0);this.initSet();this.el.tabItem.target.forEach(function(c,b){d(c).hasClass("tab__item--active")&&
(a.prevTarget=a.posArr[b])})};e.prototype.bindEvents=function(){var a=this;this.el.window.on("resize",this.handler.resize);this.el.tabItem.on("click",this.handler.clickTabItem);m.forEach(function(c){a.el.contentList.on(c,function(){!1===a.endFlag&&(q.setLazyLoad(),a.endFlag=!0)})})};e.prototype.unBindEvents=function(){var a=this;this.el.tabItem.off("click",this.handler.clickTabItem);this.el.window.off("resize",this.handler.resize);m.forEach(function(c){a.el.contentList.off(c)})};e.prototype.setSwiper=
function(){g.MOBILE>h.getViewPort().width&&this.el.swiper.target.forEach(function(a){void 0===a.swiper?f.slideInit(a):f.slideReInit(a)})};var n=function(){d(".history").target.forEach(function(a){e.instances.has(a)||new e(a)})};e.instances=new WeakMap;d.ready(n);window.sg.components.history={init:n,reInit:function(a){a=void 0===a?null:a;d(".history").target.forEach(function(c){null===a&&d(c).find(".tab").target.forEach(function(a){p.init(a).reInit()});e.instances.has(c)?e.instances.get(c).reInit():
new e(c)})}}})();