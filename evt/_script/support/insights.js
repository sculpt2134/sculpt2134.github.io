var filterInsights={initSetFilter:function(){var check=false;$("li.tag-list .chk-form input").each(function(index,item){if($(this).is(":checked")){var tagObj=$(this).closest("li.tag-list").find("a > span");addFilter(this);var count=Number($(tagObj).text());$(tagObj).text(count+1);check=true}});if(check)filterInsights.reloadFilterInsights();else loadList()},setFilter:function(obj,type){var tagObj=$(obj).closest("li.tag-list").find("a > span");if(type=="A")addFilter(obj);else if(type=="D"){var itemObj=
$(".filter-area").find("span[data-item-no="+$(obj).data("item-no")+"]");$(".filter-area").find(itemObj).remove();var count=Number($(tagObj).text());$(tagObj).text(count-1)}filterInsights.reloadFilterInsights()},delFilter:function(tagNo,itemNo){var itemObj=$(".filter-area").find("span[data-item-no="+itemNo+"]");$(".filter-area").find(itemObj).remove();var tagObj=$("li.tag-list[data-tag-no="+tagNo+"]").find("a > span");var checkObj=$("li.tag-list .chk-form input[data-item-no="+itemNo+"]");$(checkObj).prop("checked",
false);var count=Number($(tagObj).text());$(tagObj).text(count-1);filterInsights.reloadFilterInsights()},resetFilter:function(){$(".filter-area").html("");$("li.tag-list").find("a > span").text("0");$("li.tag-list .chk-form input:checkbox").prop("checked",false);filterInsights.reloadFilterInsights()},reloadFilterInsights:function(){var obj=$(".list-filter .list-box input[type='checkbox']:checked");var length=$(obj).length;if(length>0)$(".btnInit").show();else $(".btnInit").hide();var filterList=new Array;
$(obj).each(function(index,item){var tagInfo=new Object;tagInfo.tagNo=$(this).data("tag-no");tagInfo.tagItemNo=$(this).data("item-no");filterList.push(tagInfo)});var filters=JSON.stringify(filterList);$("#filterStr").val(filters);$("#page").val(1);loadList()},setFilterUrl:function(){var param=$("#filterParam").val();var title=$("html > head > title").text();var pathname=window.location.pathname;var goUrl=pathname;if(param!="")goUrl+="?"+param;window.history.replaceState(param,title,goUrl)}};
function addFilter(obj){var winw=$(window).width();var filter="";if(winw<801){filter+='<div class="item">';filter+='\t<span class="txt" data-item-no="'+$(obj).data("item-no")+'">'+$(obj).attr("title");filter+='<button type="button" onclick="filterInsights.delFilter('+$(obj).data("tag-no")+", "+$(obj).data("item-no")+');" class="btn-delete">삭제</button></span>';filter+="</div>"}else{filter+='<span class="txt" data-item-no="'+$(obj).data("item-no")+'">'+$(obj).attr("title");filter+='<button type="button" onclick="filterInsights.delFilter('+
$(obj).data("tag-no")+", "+$(obj).data("item-no")+');" data-focus-next="insightsOptArea">삭제</button></span>'}$(".filter-area").append(filter);var tagObj=$(obj).closest("li.tag-list").find("a > span");var count=Number($(tagObj).text());$(tagObj).text(count+1)}
$(document).ready(function(){$(".list-filter .btn-filter").on("click",function(e){$(this).parent().find(".list-box").slideUp();if(!$(this).parent().hasClass("active")){$(this).parent().addClass("active");if(!$(this).next().is(":visible")){$(this).next().slideDown();$(this).parent().addClass("open")}}else{$(this).parent().removeClass("active");$(this).parent().find(".list-box").slideUp()}});$(".list-filter > li").eq(0).find(".btn-filter").click();$(".list-filter > li").eq(1).find(".btn-filter").click();
$(".seoul > label").on("click",function(e){$(this).parent().find(".seoul-inner").slideUp("fast");if(!$(this).hasClass("active")){$(this).addClass("active");if(!$(this).next().is(":visible")){$(this).next().slideDown("fast");$(this).addClass("open")}}else{$(this).removeClass("active");$(this).parent().find(".seoul-inner").slideUp("fast")}});$("li.tag-list .chk-form input").click(function(){if($(this).is(":checked"))filterInsights.setFilter($(this),"A");else filterInsights.setFilter($(this),"D")})});
