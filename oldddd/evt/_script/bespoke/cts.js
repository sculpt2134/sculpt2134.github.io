!function(e,t,n){var r;n=e.ex2cts||{},e.ex2cts||(e.ex2cts=n),n.id="",n.version="1.0.6",n.trk_url="//cts2.exelbid.com/v2/cts",n.clk_id_name="clk_id",n.clk_id_cookie_name="ex2_clk_id",n.cmd=n.cmd||[],n.gen_key=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz012345678",t="",n=0;20>n;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return t},n.set_cookie=function(e,n,r){var i=new Date;i.setTime(i.getTime()+60*r*60*1e3);var o=i.toUTCString(),c=e+"="+escape(n)+(o?";expires="+o:"")+";path=/";t.cookie=c},n.get_cookie=function(e){var n=t.cookie.indexOf(e+"=");if(_start_idx=n+e.length+1,!n&&e!=t.cookie.substring(0,e.length))return null;if(-1==n)return null;var r=t.cookie.indexOf(";",_start_idx);return-1==r&&(r=t.cookie.length),unescape(t.cookie.substring(_start_idx,r))},n.get_click_id_from_url=function(){try{if(!e.location||!e.location.search)return"";for(var r=e.location.search.substring(1).split("&"),i=0;i<r.length;i++){if((_=r[i].split("="))[0]==n.clk_id_name)if(""!=(s=_[1]))return s}if(!t.referrer)return"";var o=t.referrer,c=o.indexOf("?");if(c)for(r=o.substr(c+1).split("&"),i=0;i<r.length;i++){var _,s;if((_=r[i].split("="))[0]==n.clk_id_name)if(""!=(s=_[1]))return s}}catch(e){return""}return""},n.burn_click_id=function(){var e=n.get_click_id_from_url();""!=e&&n.set_cookie(n.clk_id_cookie_name,e,2160)},n.get_click_id=function(){var e=n.get_cookie(n.clk_id_cookie_name);return e||""},n.get_session=function(){var e="exelbid-uid";return n.get_cookie(e)||n.set_cookie(e,n.gen_key(),2160),n.get_cookie(e)},n.peek=function(){return element=null==n.cmd[0]?null:n.cmd[0],element},n.dequeue_cmd=function(){return element=n.peek(),n.cmd.shift(),element},n.addEvent=(r=e).addEventListener?function(e,t,n,r){e.addEventListener(t,n,r)}:r.attachEvent?function(e,t,n){e.attachEvent("on"+t,n)}:function(e,t,n){e["on"+t]=n},n.getElementsStartsWithId=function(e){for(var n,r=t.body.getElementsByTagName("*"),i=[],o=0,c=r.length;o<c;o++)(n=r[o]).id.substr(0,e.length)==e&&i.push(n);return i};var i=function(e){this.key=e;var t=this.get_base_url("log");this.request(t)};for(i.prototype.get_base_url=function(e){return n.trk_url+"?key="+this.key+"&cmd="+e},i.prototype.request=function(r){var i=r+"&session="+n.get_session(),o=encodeURIComponent(n.get_click_id());if(i+="&sv="+n.version,o&&(i+="&clk_id="+o),e.screen){var c=e.screen;c.availWidth&&c.availHeight&&(i+="&asw="+c.availWidth+"&ash="+c.availHeight)}t.referrer&&(i+="&ref="+encodeURIComponent(t.referrer)),t.charset&&(i+="&charset="+encodeURIComponent(t.charset)),""!=n.get_click_id_from_url()&&(i+="&dr=Y"),i+="&rand="+(new Date).getTime(),new Image(1,1).src=i},i.prototype.view=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&product_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.cart=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&product_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.wish=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&product_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.registration=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&order_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.install=function(e){var t=this.get_base_url(e[0]);e[1]&&(t+="&order_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.purchase=function(e){var t=this.get_base_url(e[0]);e[1]&&(e[1].value&&(t+="&value="+encodeURIComponent(e[1].value)),e[1].currency&&(t+="&currency="+encodeURIComponent(e[1].currency)),e[1].order_id&&(t+="&order_id="+encodeURIComponent(e[1].order_id)),e[1].product_id&&(t+="&product_id="+encodeURIComponent(e[1].product_id))),this.request(t)},i.prototype.track=function(e){var t=this.get_base_url("track");e[1]&&(t+="&product_id="+encodeURIComponent(e[1])),this.request(t)},i.prototype.custom=function(e){this.get_base_url(e[0])},n.track_npay=function(e){if(e[1]){var t=n.getElementsStartsWithId("NPAY_BUY_LINK_IDNC_ID_");if(t&&t.length>0&&n.addEvent(t[0],"click",function(){n.push("track",e[1])}),e[2]){var r=n.getElementsStartsWithId("NPAY_WISH_LINK_IDNC_ID_");if(r&&r.length>0&&n.addEvent(r[0],"click",function(){n.push("track",e[2])}),e[3]){var i=n.getElementsStartsWithId("NPAY_TALK_LINK_IDNC_ID_");i&&i.length>0&&n.addEvent(i[0],"click",function(){n.push("track",e[3])})}}}},n.npay_async=function(e,t){if(t[1]&&"function"==typeof t[1]){var r="";if("buy"==e)r="NPAY_BUY_LINK_IDNC_ID_";else if("wish"==e)r="NPAY_WISH_LINK_IDNC_ID_";else{if("talk"!=e)return void console.error("invalid async cmd");r="NPAY_TALK_LINK_IDNC_ID_"}var i=n.getElementsStartsWithId(r);i&&i.length>0&&n.addEvent(i[0],"click",function(){t[1]()})}},i.prototype.track_npay=function(e){setTimeout(function(){n.track_npay(e)},700)},i.prototype.npay_async_buy=function(e){setTimeout(function(){n.npay_async("buy",e)},700)},i.prototype.npay_async_wish=function(e){setTimeout(function(){n.npay_async("wish",e)},700)},i.prototype.npay_async_talk=function(e){setTimeout(function(){n.npay_async("talk",e)},700)},i.prototype.run_cmd=function(e){if(e.length){var t=e[0];this[t]?(this[t],this[t](e)):this.custom(e)}},n.run_cmd=function(e){if(e.length){var t=e[0];if("init"!=t)n.ex2_obj?n.ex2_obj.run_cmd(e):console.error("is not init ex2obj "+t);else{var r=e[1];if(!r)return;n.ex2_obj=new i(r)}}},n.burn_click_id();_args=n.dequeue_cmd();)"object"==typeof _args&&n.run_cmd(_args);n.callFunc=function(){arguments&&n.run_cmd(arguments)}}(window,document);